const _0x1d6274=_0x4661;(function(_0x3a932a,_0x530a1c){const _0x118096=_0x4661,_0x242f7f=_0x3a932a();while(!![]){try{const _0x27bd28=-parseInt(_0x118096(0x170))/0x1*(parseInt(_0x118096(0x1ba))/0x2)+-parseInt(_0x118096(0x182))/0x3*(-parseInt(_0x118096(0x1b6))/0x4)+-parseInt(_0x118096(0x1a1))/0x5+parseInt(_0x118096(0x194))/0x6+parseInt(_0x118096(0x1b3))/0x7+-parseInt(_0x118096(0x164))/0x8*(-parseInt(_0x118096(0x15e))/0x9)+parseInt(_0x118096(0x1b1))/0xa*(-parseInt(_0x118096(0x18b))/0xb);if(_0x27bd28===_0x530a1c)break;else _0x242f7f['push'](_0x242f7f['shift']());}catch(_0x11e037){_0x242f7f['push'](_0x242f7f['shift']());}}}(_0x17e2,0xdeaca));import _0x2e2c65 from'../../lib/config/config.js';import{randomBytes}from'crypto';import _0x45c9a5 from'../../lib/plugins/plugin.js';import*as _0x3758ed from'icqq/lib/core/protobuf/index.js';import*as _0x19700e from'zlib';import{promisify}from'util';import{Contactable}from'icqq/lib/internal/contactable.js';import{Group}from'icqq/lib/group.js';import{User}from'icqq/lib/friend.js';import{escapeXml,uuid}from'icqq/lib/common.js';import{rand2uuid}from'icqq/lib/message/index.js';import{timestamp}from'icqq/lib/core/constants.js';import{PrivateMessage}from'icqq';const gzip=promisify(_0x19700e[_0x1d6274(0x18a)]),originalPreprocess=Contactable[_0x1d6274(0x1c2)]['_preprocess'],originalSendMsg=Group[_0x1d6274(0x1c2)][_0x1d6274(0x169)],originalSendMsgPrivate=User['prototype']['sendMsg'];Contactable[_0x1d6274(0x1c2)]['_preprocess']=async function(_0x3cd402,_0x4f69f8){const _0x50353f=_0x1d6274;!Array[_0x50353f(0x18e)](_0x3cd402)&&(_0x3cd402=[_0x3cd402]);let _0x396903='',_0x20bea7,_0x2776a6;const _0x10f2f0=_0x3cd402['filter'](_0x1d591d=>typeof _0x1d591d!==_0x50353f(0x196)&&_0x1d591d[_0x50353f(0x166)]===_0x50353f(0x17c));_0x3cd402=_0x3cd402[_0x50353f(0x15a)](_0x1a9547=>!_0x10f2f0['includes'](_0x1a9547))[_0x50353f(0x19f)](_0x564025=>typeof _0x564025===_0x50353f(0x196)?{'type':_0x50353f(0x175),'text':_0x564025}:_0x564025);const _0x17f9ae=[];logger[_0x50353f(0x1c1)](_0x3cd402);if(!_0x2e2c65[_0x50353f(0x1c8)][_0x50353f(0x19d)]&&_0x3cd402['every'](_0x5873b8=>_0x5873b8['type']===_0x50353f(0x1ab)))return await originalPreprocess[_0x50353f(0x1bd)](this)(_0x3cd402,_0x4f69f8);for(let _0x1ab4c0 of _0x3cd402){switch(_0x1ab4c0[_0x50353f(0x166)]){case _0x50353f(0x175):{_0x396903+=_0x1ab4c0[_0x50353f(0x175)];break;}case _0x50353f(0x1ab):{if(Bot['FormatFile']&&Bot[_0x50353f(0x172)]&&typeof Bot[_0x50353f(0x172)]===_0x50353f(0x198)){if(_0x1ab4c0?.['url'])_0x1ab4c0[_0x50353f(0x171)]=_0x1ab4c0[_0x50353f(0x1c9)];_0x1ab4c0['file']=await Bot?.[_0x50353f(0x1a0)](_0x1ab4c0[_0x50353f(0x171)])||_0x1ab4c0[_0x50353f(0x171)];const {width:_0x2a24da,height:_0x1dc053,url:_0x414618}=await Bot[_0x50353f(0x172)](_0x1ab4c0['file']);_0x396903+='![图片\x20#'+_0x2a24da+'\x20#'+_0x1dc053+_0x50353f(0x163)+_0x414618+')';}else logger[_0x50353f(0x1c1)](_0x50353f(0x1a8)),_0x17f9ae[_0x50353f(0x15f)](_0x1ab4c0);break;}case _0x50353f(0x1b5):{_0x396903+=_0x1ab4c0[_0x50353f(0x19c)];break;}case'button':{_0x20bea7=_0x1ab4c0;break;}case'at':{_0x2776a6=_0x1ab4c0;break;}default:{_0x17f9ae[_0x50353f(0x15f)](_0x1ab4c0);}}}_0x10f2f0[_0x50353f(0x1a2)]>0x0&&_0x17f9ae[_0x50353f(0x15f)](..._0x10f2f0);let _0x36f20b={'type':_0x50353f(0x1b5),'content':_0x396903},_0x498077=_0x20bea7?[_0x36f20b,_0x20bea7]:[_0x36f20b];if(_0x2776a6)_0x498077[_0x50353f(0x15f)](_0x2776a6);logger[_0x50353f(0x1c1)](_0x498077);if(!_0x396903)return await originalPreprocess['bind'](this)(_0x17f9ae,_0x4f69f8);else{if(_0x17f9ae[_0x50353f(0x1a2)]!==0x0)return{'md':_0x498077,'left':_0x17f9ae};else{let _0x29fcab=await sendMarkdown(this['c'],_0x498077,!![]);return{'rich':_0x29fcab,'left':_0x17f9ae,'md':_0x498077};}}},Contactable['prototype'][_0x1d6274(0x187)]=async function(_0x1e7636){const _0x1b166a=_0x1d6274,_0x484eb3=this['c'][_0x1b166a(0x168)]['nt'];!Array[_0x1b166a(0x18e)](_0x1e7636)&&(_0x1e7636=[_0x1e7636]);const _0x387995=[],_0x3b5916=[];let _0xe10171=[],_0x4a8918=0x0,_0x2d79ed=[],_0x3330ce;for(const _0x113b4b of _0x1e7636){_0x3330ce=null;if(!Array[_0x1b166a(0x18e)](_0x113b4b[_0x1b166a(0x1c6)]))_0x113b4b[_0x1b166a(0x1c6)]=[_0x113b4b[_0x1b166a(0x1c6)]];if(_0x113b4b[_0x1b166a(0x1c6)]['length']===0x1&&typeof _0x113b4b[_0x1b166a(0x1c6)][0x0]!=='string'&&['xml',_0x1b166a(0x1af)]['includes'](_0x113b4b[_0x1b166a(0x1c6)][0x0]['type'])){const _0xea3d85=_0x113b4b[_0x1b166a(0x1c6)][0x0];let _0x276899,_0x1db2a6;if(_0xea3d85[_0x1b166a(0x166)]==='xml'){let _0x34e38f=/brief="(.*?)"/gm[_0x1b166a(0x1aa)](_0xea3d85['data']);if(_0x34e38f&&_0x34e38f['length']>0x0)_0x3330ce=_0x34e38f[0x1];else _0x3330ce=_0x1b166a(0x181);let _0x126bea=/m_resid="(.*?)"/gm['exec'](_0xea3d85[_0x1b166a(0x1ac)]),_0x2f70e7=/m_fileName="(.*?)"/gm[_0x1b166a(0x1aa)](_0xea3d85[_0x1b166a(0x1ac)]);_0x126bea&&_0x126bea['length']>0x1&&_0x2f70e7&&_0x2f70e7[_0x1b166a(0x1a2)]>0x1&&(_0x276899=_0x126bea[0x1],_0x1db2a6=_0x2f70e7[0x1]);}else{if(_0xea3d85[_0x1b166a(0x166)]==='json'){_0x3330ce=_0x1b166a(0x185);let _0x58c55b;try{_0x58c55b=typeof _0xea3d85[_0x1b166a(0x1ac)]===_0x1b166a(0x18d)?_0xea3d85['data']:JSON['parse'](_0xea3d85[_0x1b166a(0x1ac)]);}catch(_0x138d98){}if(_0x58c55b){_0x3330ce=_0x58c55b[_0x1b166a(0x16d)];if(_0x58c55b[_0x1b166a(0x1b0)]===_0x1b166a(0x1c3)&&_0x58c55b[_0x1b166a(0x17d)]?.[_0x1b166a(0x161)]){let _0xe9cee5=_0x58c55b[_0x1b166a(0x17d)][_0x1b166a(0x161)];_0x276899=_0xe9cee5[_0x1b166a(0x184)],_0x1db2a6=_0xe9cee5[_0x1b166a(0x1be)];}}}}if(_0x276899&&_0x1db2a6){const _0x12a7be=_0x484eb3?await this[_0x1b166a(0x16f)](String(_0x276899),this['dm']?0x1:0x2):await this[_0x1b166a(0x1b7)](String(_0x276899),this['dm']?0x1:0x2);let _0x5c8118=_0x3758ed[_0x1b166a(0x189)](_0x12a7be)[0x2];if(!Array[_0x1b166a(0x18e)](_0x5c8118))_0x5c8118=[_0x5c8118];for(let _0x4f4421 of _0x5c8118){let _0x1547e6=_0x4f4421[0x1][_0x1b166a(0x19a)]();_0x1547e6===_0x1b166a(0x1a4)?_0x2d79ed[_0x1b166a(0x15f)]({0x1:_0x1db2a6,0x2:_0x4f4421[0x2]}):_0x2d79ed[_0x1b166a(0x15f)](_0x4f4421);}}}const _0x26e054=await originalPreprocess['bind'](this)(_0x113b4b[_0x1b166a(0x1c6)]);_0x26e054?.[_0x1b166a(0x16b)]&&_0x3330ce&&(_0x26e054['brief']=_0x3330ce);_0x3b5916[_0x1b166a(0x15f)](_0x26e054);const _0xe71d48=randomBytes(0x2)[_0x1b166a(0x1a7)](),_0x16a2ed=randomBytes(0x4)[_0x1b166a(0x177)]();let _0x44c890=String(_0x113b4b[_0x1b166a(0x176)]||_0x113b4b['user_id']);!_0x44c890&&_0x113b4b instanceof PrivateMessage&&(_0x44c890=this['c']['fl'][_0x1b166a(0x190)](_0x113b4b['user_id'])?.[_0x1b166a(0x176)]||this['c']['sl'][_0x1b166a(0x190)](_0x113b4b[_0x1b166a(0x1a6)])?.[_0x1b166a(0x176)]||_0x44c890),_0x4a8918<0x4&&(_0xe10171[_0x1b166a(0x15f)]({'text':escapeXml(_0x44c890)+':\x20'+escapeXml(_0x26e054[_0x1b166a(0x16b)]['slice'](0x0,0x32))}),_0x4a8918++),_0x484eb3?_0x387995[_0x1b166a(0x15f)]({0x1:{0x1:_0x113b4b[_0x1b166a(0x1a6)],0x6:this['dm']?this['c'][_0x1b166a(0x174)]:null,0x8:this['dm']?null:{0x1:this[_0x1b166a(0x1bb)],0x2:_0x44c890,0x5:0x2}},0x2:{0x1:this['dm']?0xa6:0x52,0x4:_0x16a2ed,0x5:_0xe71d48,0x6:_0x113b4b[_0x1b166a(0x19b)]||timestamp(),0x7:0x1,0x8:0x0,0x9:0x0},0x3:{0x1:_0x26e054[_0x1b166a(0x1b9)]}}):_0x387995[_0x1b166a(0x15f)]({0x1:{0x1:_0x113b4b['user_id'],0x2:this[_0x1b166a(0x1bb)],0x3:this['dm']?0xa6:0x52,0x4:this['dm']?0xb:null,0x5:_0xe71d48,0x6:_0x113b4b['time']||timestamp(),0x7:rand2uuid(_0x16a2ed),0x9:this['dm']?null:{0x1:this[_0x1b166a(0x1bb)],0x4:_0x44c890},0xe:this['dm']?_0x44c890:null,0x14:{0x1:0x0,0x2:_0x16a2ed}},0x3:{0x1:_0x26e054['rich']}});}_0x2d79ed[_0x1b166a(0x15f)]({0x1:_0x1b166a(0x1a4),0x2:{0x1:_0x387995}});const _0x1f6f2d=await gzip(_0x3758ed[_0x1b166a(0x1b4)]({0x2:_0x2d79ed}));let _0x3beff1;try{_0x3beff1=_0x484eb3?await this['_newUploadMultiMsg'](_0x1f6f2d):await this[_0x1b166a(0x160)](_0x1f6f2d);}catch{_0x3beff1=_0x484eb3?await this[_0x1b166a(0x15b)](_0x1f6f2d):await this['_uploadMultiMsg'](_0x1f6f2d);}const _0x3bd092={'app':_0x1b166a(0x1c3),'config':{'autosize':0x1,'forward':0x1,'round':0x1,'type':'normal','width':0x12c},'desc':_0x1b166a(0x16a),'extra':'','meta':{'detail':{'news':_0xe10171,'resid':_0x3beff1,'source':_0x1b166a(0x165),'summary':'查看'+_0x387995[_0x1b166a(0x1a2)]+_0x1b166a(0x1b8),'uniseq':uuid()['toUpperCase']()}},'prompt':_0x1b166a(0x16a),'ver':_0x1b166a(0x17f),'view':_0x1b166a(0x193)};return{'type':_0x1b166a(0x1af),'data':_0x3bd092};},Group['prototype']['sendMsg']=async function(_0x5ab990,_0x3357c9,_0x3a41cd){const _0x41b663=_0x1d6274,_0x490f4f=await this[_0x41b663(0x1c4)](_0x5ab990,_0x3357c9);_0x490f4f[_0x41b663(0x1bf)]&&_0x490f4f['left'][_0x41b663(0x1a2)]>0x0&&await originalSendMsg[_0x41b663(0x1bd)](this)(_0x490f4f[_0x41b663(0x1bf)],_0x3357c9,_0x3a41cd);if(_0x490f4f['md']&&_0x490f4f['md'][_0x41b663(0x1a2)]>0x0)return await originalSendMsg[_0x41b663(0x1bd)](this)(_0x490f4f['md'],![],_0x3a41cd);return await originalSendMsg[_0x41b663(0x1bd)](this)(_0x5ab990,_0x3357c9,_0x3a41cd);},User[_0x1d6274(0x1c2)][_0x1d6274(0x169)]=async function(_0x24b605,_0x5beebf){const _0x4b1f28=_0x1d6274,_0x61ffed=await this[_0x4b1f28(0x1c4)](_0x24b605,_0x5beebf);_0x61ffed[_0x4b1f28(0x1bf)]&&_0x61ffed[_0x4b1f28(0x1bf)]['length']>0x0&&await originalSendMsgPrivate[_0x4b1f28(0x1bd)](this)(_0x61ffed[_0x4b1f28(0x1bf)],_0x5beebf);if(_0x61ffed['md']&&_0x61ffed['md'][_0x4b1f28(0x1a2)]>0x0)return await originalSendMsgPrivate['bind'](this)(_0x61ffed['md'],![]);return await originalSendMsgPrivate[_0x4b1f28(0x1bd)](this)(_0x24b605,_0x5beebf);};export async function sendMarkdown(_0x5e1a73,_0x2a9dfc=[],_0x2d64f9=![]){const _0x4d631b=_0x1d6274;!Array[_0x4d631b(0x18e)](_0x2a9dfc)&&(_0x2a9dfc=[_0x2a9dfc]);let _0x5d62eb=_0x2a9dfc[_0x4d631b(0x16e)](_0x59a0f8=>_0x59a0f8['type']===_0x4d631b(0x1b5))[_0x4d631b(0x19c)],_0x188959=_0x2a9dfc[_0x4d631b(0x16e)](_0x3239ec=>_0x3239ec[_0x4d631b(0x166)]==='at'),_0x530a59;if(_0x188959){let _0x5a191b=_0x188959['qq'];if(_0x5a191b!==_0x4d631b(0x1ae)){let _0x54692b=Bot['gml'][_0x4d631b(0x190)](_0x5e1a73[_0x4d631b(0x16c)])?.[_0x4d631b(0x190)](_0x5a191b);_0x530a59=makeAtElement(_0x188959,_0x54692b);if(!_0x188959[_0x4d631b(0x188)]){let _0xd1b2f7='[@'+_0x54692b?.[_0x4d631b(0x17e)]+']';_0x5d62eb=_0xd1b2f7+('(mqqapi://markdown/mention?at_type=2&at_tinyid='+_0x188959['qq']+')\x0a')+_0x5d62eb;}}else _0x5d62eb=_0x4d631b(0x195)+_0x5d62eb,_0x530a59=makeAtElement(_0x188959);}let _0x23d2c7=[_0x3758ed[_0x4d631b(0x1b4)]({0x35:{0x1:0x2d,0x2:{0x1:_0x5d62eb},0x3:0x1}})];_0x530a59&&_0x23d2c7[_0x4d631b(0x15f)](_0x530a59);_0x2a9dfc[_0x4d631b(0x15a)](_0x22b0a7=>_0x22b0a7[_0x4d631b(0x166)]===_0x4d631b(0x1b2))[_0x4d631b(0x186)](_0x3379ad=>{const _0x375815=_0x4d631b,{content:_0x430d54}=_0x3379ad;if(!_0x430d54[_0x375815(0x178)])return;const _0x5d6d87={0x1:{0x1:_0x430d54[_0x375815(0x178)][_0x375815(0x19f)](_0x690e55=>{const _0x516f1a=_0x375815;return{0x1:_0x690e55[_0x516f1a(0x17a)][_0x516f1a(0x19f)](_0x2b3229=>{const _0x8be957=_0x516f1a;return{0x1:_0x2b3229['id'],0x2:{0x1:_0x2b3229[_0x8be957(0x15c)][_0x8be957(0x1c7)],0x2:_0x2b3229[_0x8be957(0x15c)]['visited_label'],0x3:_0x2b3229[_0x8be957(0x15c)][_0x8be957(0x15d)]},0x3:{0x1:_0x2b3229[_0x8be957(0x192)]['type'],0x2:{0x1:_0x2b3229[_0x8be957(0x192)][_0x8be957(0x180)][_0x8be957(0x166)],0x2:_0x2b3229[_0x8be957(0x192)][_0x8be957(0x180)][_0x8be957(0x179)],0x3:_0x2b3229[_0x8be957(0x192)][_0x8be957(0x180)][_0x8be957(0x197)]},0x4:_0x2b3229[_0x8be957(0x192)]['unsupport_tips'],0x5:_0x2b3229[_0x8be957(0x192)][_0x8be957(0x1ac)],0x7:_0x2b3229['action'][_0x8be957(0x1c5)]?0x1:0x0,0x8:_0x2b3229[_0x8be957(0x192)]['enter']?0x1:0x0}};})};}),0x2:_0x430d54['appid']}};_0x23d2c7[_0x375815(0x15f)](_0x3758ed[_0x375815(0x1b4)]({0x35:{0x1:0x2e,0x2:_0x5d6d87,0x3:0x1}}));});let _0x4ec0e3={0x1:{0x1:Bot['uin'],0x2:Bot['uid'],0x6:Bot['uin']+'',0x7:{0x6:Bot[_0x4d631b(0x176)]}},0x2:{0x1:0x9,0x2:0xaf,0x3:0xaf,0x4:randomBytes(0x4)[_0x4d631b(0x177)](),0x5:randomBytes(0x4)[_0x4d631b(0x177)](),0x6:Math[_0x4d631b(0x17b)](Date[_0x4d631b(0x18f)]()/0x3e8),0x7:0x1,0x8:0x0,0x9:0x0,0xb:randomBytes(0x4)[_0x4d631b(0x177)](),0xf:{0x1:0x0,0x2:0x0,0x3:0x2,0x4:'',0x5:''}},0x3:{0x1:{0x2:_0x23d2c7}}},_0x2304c6=_0x3758ed[_0x4d631b(0x1b4)]({0x2:{0x1:'MultiMsg',0x2:{0x1:_0x4ec0e3}}}),_0x24063a=Math[_0x4d631b(0x17b)](Math[_0x4d631b(0x162)]()*0x2710)+0x2710,_0x56f459={0x2:{0x1:0x1,0x2:{0x2:_0x24063a+''},0x3:_0x24063a,0x4:await gzip(_0x2304c6)},0xf:{0x1:0x4,0x2:0x2,0x3:0x9,0x4:0x0}};const _0x54b0d2=await Bot[_0x4d631b(0x1a3)](_0x4d631b(0x167),_0x3758ed[_0x4d631b(0x1b4)](_0x56f459)),_0x1c1206=_0x3758ed[_0x4d631b(0x189)](_0x54b0d2)?.[0x2];let _0x353a85=_0x1c1206[0x3][_0x4d631b(0x19a)]();logger[_0x4d631b(0x1c1)](_0x4d631b(0x1a9)+_0x353a85);if(_0x2d64f9)return{0x2:{0x25:{0x6:0x1,0x7:_0x353a85}}};let _0x3bc61f={0x1:_0x5e1a73[_0x4d631b(0x191)]?{0x2:{0x1:_0x5e1a73['group_id']}}:{0x1:{0x1:_0x5e1a73['friend'][_0x4d631b(0x1a5)]}},0x2:{0x1:0x1,0x2:0x0,0x3:0x0},0x3:{0x1:{0x2:{0x25:{0x6:0x1,0x7:_0x353a85}}}},0x4:randomBytes(0x2)[_0x4d631b(0x1ad)](),0x5:randomBytes(0x4)['readUInt32BE']()};_0x3bc61f=_0x3758ed[_0x4d631b(0x1b4)](_0x3bc61f),await Bot[_0x4d631b(0x1a3)](_0x4d631b(0x18c),_0x3bc61f);}function _text(_0x2d6735,_0x6c28cd){const _0x3b1a6a=_0x1d6274;_0x2d6735=String(_0x2d6735);if(!_0x2d6735[_0x3b1a6a(0x1a2)])return;this[_0x3b1a6a(0x183)][_0x3b1a6a(0x15f)]({0x1:{0x1:_0x2d6735,0x3:_0x6c28cd}}),this['length']+=_0x2d6735[_0x3b1a6a(0x1a2)],this[_0x3b1a6a(0x16b)]+=_0x2d6735;}function _0x4661(_0x223e31,_0x1f2322){const _0x17e2bb=_0x17e2();return _0x4661=function(_0x466101,_0x236826){_0x466101=_0x466101-0x15a;let _0x19a41f=_0x17e2bb[_0x466101];return _0x19a41f;},_0x4661(_0x223e31,_0x1f2322);}function makeAtElement(_0x5ac7d4,_0x488346){const _0x34565e=_0x1d6274,_0x354c2c=Buffer['from']([0x0,0x1,0x0,0x0,0x0]),_0x38d002=Buffer['alloc'](0x2);let _0x2b08c5,{qq:_0x313eb1,text:_0x5e6f0f,dummy:_0x38de6a}=_0x5ac7d4;if(_0x313eb1===_0x34565e(0x1ae))var _0x24c9e8=0x0,_0x6dffdf=0x1,_0x929536=_0x34565e(0x1bc);else _0x24c9e8=Number(_0x313eb1),_0x6dffdf=0x0,_0x929536=_0x5e6f0f||String(_0x313eb1),_0x2b08c5=_0x488346?.['uid']||'',!_0x5e6f0f&&(_0x929536=_0x488346?.[_0x34565e(0x17e)]||_0x488346?.[_0x34565e(0x176)]||_0x929536);_0x929536='@'+_0x929536;if(_0x38de6a)return _text(_0x929536);const _0x3f45b8=Buffer[_0x34565e(0x199)](0x6);_0x3f45b8['writeUInt8'](_0x929536[_0x34565e(0x1a2)]),_0x3f45b8[_0x34565e(0x173)](_0x6dffdf,0x1),_0x3f45b8['writeUInt32BE'](_0x24c9e8,0x2);const _0x17e358=Buffer[_0x34565e(0x1c0)]([_0x354c2c,_0x3f45b8,_0x38d002]);return _0x3758ed[_0x34565e(0x1b4)]({0x1:{0x1:_0x929536,0x3:_0x17e358,0xc:{0x3:_0x6dffdf===0x1?0x1:0x2,0x4:_0x24c9e8,0x5:0x0,0x9:_0x24c9e8===0x0?_0x34565e(0x1ae):_0x2b08c5,0xb:0x0}}});}export class mdTest extends _0x45c9a5{constructor(){const _0x54ab47=_0x1d6274;super({'name':'md','dsc':'md','event':'message','priority':-0x5af3107a4000,'rule':[{'reg':_0x54ab47(0x19e),'fnc':'md'}]}),(!segment[_0x54ab47(0x1b5)]||typeof segment['markdown']!=='function')&&(segment[_0x54ab47(0x1b5)]=_0x30be27=>{const _0x42597d=_0x54ab47;return{'type':_0x42597d(0x1b5),'content':_0x30be27};});}async['md'](_0x28046c){const _0x5c326e=_0x1d6274;let _0x2e2c6d=_0x28046c['msg']['replace'](/^#md/,''),_0x1f25b9=segment[_0x5c326e(0x1b5)](_0x2e2c6d);await sendMarkdown(_0x28046c,[_0x1f25b9]);}}function _0x17e2(){const _0x49199d=['MessageSvc.PbSendMsg','object','isArray','now','get','isGroup','action','contact','6080928OAJfjA','[@全体成员](mqqapi://markdown/mention?at_type=2&at_tinyid=everyone)\x0a','string','specify_user_ids','function','allocUnsafe','toString','time','content','image_force_md','^#md','map','FormatFile','4106445uJsuvf','length','sendUni','MultiMsg','uid','user_id','readInt16BE','无图床，不发markdown','resId\x20got:\x20','exec','image','data','readUInt16BE','all','json','app','1802750SYCXYQ','button','1782081RrmNHR','encode','markdown','76XxIBxB','_downloadMultiMsg','条转发消息','rich','878dfOCaO','target','全体成员','bind','uniseq','left','concat','debug','prototype','com.tencent.multimsg','_preprocess','reply','message','label','bot','url','filter','_newUploadMultiMsg','render_data','style','7162569UdfQGi','push','_uploadMultiMsg','detail','random',']\x20(','16yrxOFV','群聊的聊天记录','type','trpc.group.long_msg_interface.MsgService.SsoSendLongMsg','apk','sendMsg','[聊天记录]','brief','group_id','prompt','find','_newDownloadMultiMsg','1282DjChyV','file','imageToUrl','writeUInt8','uin','text','nickname','readInt32BE','rows','specify_role_ids','buttons','floor','node','meta','card','0.0.0.5','permission','[XML]','224121YyGrwJ','elems','resid','[JSON]','forEach','makeForwardMsg','notext','decode','gzip','121tpIxuF'];_0x17e2=function(){return _0x49199d;};return _0x17e2();}